{
    "nodes": [
        [
            {
                "position": [
                    -406.4233093261719,
                    97.8554458618164
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "create_irradiance_cubemap.json",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::sub_graph",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "filepath": "create_irradiance_cubemap.json",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    },
                    {
                        "from": "cube_map",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "irradianceMap"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    },
                    {
                        "from": "cube_map",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "irradianceMap"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -275.6681823730469,
                    416.0108337402344
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::clear",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node01",
                    "type": [
                        "color",
                        "depth"
                    ],
                    "color": {
                        "r": 25,
                        "g": 25,
                        "b": 25,
                        "a": 0
                    },
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 2,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 2,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -76.86822509765625,
                    307.11102294921877
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::bind",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node1",
                    "channel": 0,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 13,
                                "pin": "prev"
                            },
                            {
                                "node_idx": 14,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 13,
                                "pin": "prev"
                            },
                            {
                                "node_idx": 14,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -224.95623779296876,
                    87.41059112548828
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::shader",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node2",
                    "vert": "#version 330 core\r\nlayout (location = 0) in vec3 aPos;\r\nlayout (location = 2) in vec2 aTexCoords;\r\nlayout (location = 1) in vec3 aNormal;\r\n\r\nout vec2 TexCoords;\r\nout vec3 WorldPos;\r\nout vec3 Normal;\r\n\r\nuniform mat4 projection;\r\nuniform mat4 view;\r\nuniform mat4 model;\r\n\r\nvoid main()\r\n{\r\n    TexCoords = aTexCoords;\r\n    WorldPos = vec3(model * vec4(aPos, 1.0));\r\n    Normal = mat3(model) * aNormal;   \r\n\r\n    gl_Position =  projection * view * vec4(WorldPos, 1.0);\r\n}",
                    "frag": "#version 330 core\r\nout vec4 FragColor;\r\nin vec2 TexCoords;\r\nin vec3 WorldPos;\r\nin vec3 Normal;\r\n\r\n// material parameters\r\nuniform vec3 albedo;\r\nuniform float metallic;\r\nuniform float roughness;\r\nuniform float ao;\r\n\r\n// IBL\r\nuniform samplerCube irradianceMap;\r\nuniform samplerCube prefilterMap;\r\nuniform sampler2D brdfLUT;\r\n\r\n// lights\r\nuniform vec3 lightPositions[4];\r\nuniform vec3 lightColors[4];\r\n\r\nuniform vec3 camPos;\r\n\r\nconst float PI = 3.14159265359;\r\n// ----------------------------------------------------------------------------\r\nfloat DistributionGGX(vec3 N, vec3 H, float roughness)\r\n{\r\n    float a = roughness*roughness;\r\n    float a2 = a*a;\r\n    float NdotH = max(dot(N, H), 0.0);\r\n    float NdotH2 = NdotH*NdotH;\r\n\r\n    float nom   = a2;\r\n    float denom = (NdotH2 * (a2 - 1.0) + 1.0);\r\n    denom = PI * denom * denom;\r\n\r\n    return nom / denom;\r\n}\r\n// ----------------------------------------------------------------------------\r\nfloat GeometrySchlickGGX(float NdotV, float roughness)\r\n{\r\n    float r = (roughness + 1.0);\r\n    float k = (r*r) / 8.0;\r\n\r\n    float nom   = NdotV;\r\n    float denom = NdotV * (1.0 - k) + k;\r\n\r\n    return nom / denom;\r\n}\r\n// ----------------------------------------------------------------------------\r\nfloat GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness)\r\n{\r\n    float NdotV = max(dot(N, V), 0.0);\r\n    float NdotL = max(dot(N, L), 0.0);\r\n    float ggx2 = GeometrySchlickGGX(NdotV, roughness);\r\n    float ggx1 = GeometrySchlickGGX(NdotL, roughness);\r\n\r\n    return ggx1 * ggx2;\r\n}\r\n// ----------------------------------------------------------------------------\r\nvec3 fresnelSchlick(float cosTheta, vec3 F0)\r\n{\r\n    return F0 + (1.0 - F0) * pow(1.0 - cosTheta, 5.0);\r\n}\r\n// ----------------------------------------------------------------------------\r\nvec3 fresnelSchlickRoughness(float cosTheta, vec3 F0, float roughness)\r\n{\r\n    return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(1.0 - cosTheta, 5.0);\r\n}   \r\n// ----------------------------------------------------------------------------\r\nvoid main()\r\n{\t\t\r\n    vec3 N = Normal;\r\n    vec3 V = normalize(camPos - WorldPos);\r\n    vec3 R = reflect(-V, N); \r\n\r\n    // calculate reflectance at normal incidence; if dia-electric (like plastic) use F0 \r\n    // of 0.04 and if it's a metal, use the albedo color as F0 (metallic workflow)    \r\n    vec3 F0 = vec3(0.04); \r\n    F0 = mix(F0, albedo, metallic);\r\n\r\n    // reflectance equation\r\n    vec3 Lo = vec3(0.0);\r\n    for(int i = 0; i < 4; ++i) \r\n    {\r\n        // calculate per-light radiance\r\n        vec3 L = normalize(lightPositions[i] - WorldPos);\r\n        vec3 H = normalize(V + L);\r\n        float distance = length(lightPositions[i] - WorldPos);\r\n        float attenuation = 1.0 / (distance * distance);\r\n        vec3 radiance = lightColors[i] * attenuation;\r\n\r\n        // Cook-Torrance BRDF\r\n        float NDF = DistributionGGX(N, H, roughness);   \r\n        float G   = GeometrySmith(N, V, L, roughness);    \r\n        vec3 F    = fresnelSchlick(max(dot(H, V), 0.0), F0);        \r\n        \r\n        vec3 nominator    = NDF * G * F;\r\n        float denominator = 4 * max(dot(N, V), 0.0) * max(dot(N, L), 0.0) + 0.001; // 0.001 to prevent divide by zero.\r\n        vec3 specular = nominator / denominator;\r\n        \r\n         // kS is equal to Fresnel\r\n        vec3 kS = F;\r\n        // for energy conservation, the diffuse and specular light can't\r\n        // be above 1.0 (unless the surface emits light); to preserve this\r\n        // relationship the diffuse component (kD) should equal 1.0 - kS.\r\n        vec3 kD = vec3(1.0) - kS;\r\n        // multiply kD by the inverse metalness such that only non-metals \r\n        // have diffuse lighting, or a linear blend if partly metal (pure metals\r\n        // have no diffuse light).\r\n        kD *= 1.0 - metallic;\t                \r\n            \r\n        // scale light by NdotL\r\n        float NdotL = max(dot(N, L), 0.0);        \r\n\r\n        // add to outgoing radiance Lo\r\n        Lo += (kD * albedo / PI + specular) * radiance * NdotL; // note that we already multiplied the BRDF by the Fresnel (kS) so we won't multiply by kS again\r\n    }   \r\n    \r\n    // ambient lighting (we now use IBL as the ambient term)\r\n    vec3 F = fresnelSchlickRoughness(max(dot(N, V), 0.0), F0, roughness);\r\n    \r\n    vec3 kS = F;\r\n    vec3 kD = 1.0 - kS;\r\n    kD *= 1.0 - metallic;\t  \r\n    \r\n    vec3 irradiance = texture(irradianceMap, N).rgb;\r\n    vec3 diffuse      = irradiance * albedo;\r\n    \r\n    // sample both the pre-filter map and the BRDF lut and combine them together as per the Split-Sum approximation to get the IBL specular part.\r\n    const float MAX_REFLECTION_LOD = 4.0;\r\n    vec3 prefilteredColor = textureLod(prefilterMap, R,  roughness * MAX_REFLECTION_LOD).rgb;    \r\n    vec2 brdf  = texture(brdfLUT, vec2(max(dot(N, V), 0.0), roughness)).rg;\r\n    vec3 specular = prefilteredColor * (F * brdf.x + brdf.y);\r\n\r\n    vec3 ambient = (kD * diffuse + specular) * ao;\r\n    \r\n    vec3 color = ambient + Lo;\r\n\r\n    // HDR tonemapping\r\n    color = color / (color + vec3(1.0));\r\n    // gamma correct\r\n    color = pow(color, vec3(1.0/2.2)); \r\n\r\n    FragColor = vec4(color , 1.0);\r\n}\r\n",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 2,
                                "pin": "obj"
                            },
                            {
                                "node_idx": 13,
                                "pin": "shader"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 2,
                                "pin": "obj"
                            },
                            {
                                "node_idx": 13,
                                "pin": "shader"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    293.8277893066406,
                    369.33984375
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::pass_end",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "",
                    "pass_end": 0,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [],
                "connection": []
            }
        ],
        [
            {
                "position": [
                    -401.35565185546877,
                    336.02178955078127
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::project_mat",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node5",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "projection"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "projection"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -400.72662353515627,
                    291.4098815917969
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::view_mat",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node6",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "view"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "view"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -398.242919921875,
                    247.32449340820313
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::model_mat",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node7",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "model"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "model"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -393.38824462890627,
                    -186.33160400390626
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::camera_position",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node132",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "camPos"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "camPos"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -382.4263916015625,
                    -93.80640411376953
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::custom_data",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node143",
                    "code": "[vec3(-10.0f,  10.0f, 10.0f),vec3( 10.0f,  10.0f, 10.0f),vec3(-10.0f, -10.0f, 10.0f),vec3( 10.0f, -10.0f, 10.0f)]",
                    "ret_type": "void",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "lightPositions[4]"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "lightPositions[4]"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -380.7735595703125,
                    -140.91384887695313
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::custom_data",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node1415",
                    "code": "[vec3(300.0f, 300.0f, 300.0f),vec3(300.0f, 300.0f, 300.0f),vec3(300.0f, 300.0f, 300.0f),vec3(300.0f, 300.0f, 300.0f)]",
                    "ret_type": "void",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "lightColors[4]"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "lightColors[4]"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -391.3837890625,
                    202.51724243164063
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::vector3",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node8",
                    "val": {
                        "x": 0.5,
                        "y": 0.0,
                        "z": 0.0
                    },
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "albedo"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "albedo"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -388.66156005859377,
                    156.08511352539063
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::vector1",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node114",
                    "val": 1.0,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "ao"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "ao"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    146.8412628173828,
                    248.29537963867188
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::custom_function",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node125",
                    "code": "draw_scene(in shader shader)\\n{\\n    var nrRows = 7.0f;\\n    var nrColumns = 7.0f;\\n    var spacing = 2.5f;\\n\\n    var mt = mat4();\\n    for (var row = 0; row < nrRows; ++row)\\n    {\\n        set_uniform(shader, \"metallic\", row / nrRows);\\n        for (var col = 0; col < nrColumns; ++col)\\n        {\\n            // we clamp the roughness to 0.025 - 1.0 as perfectly smooth surfaces (roughness of 0.0) tend to look a bit off\\n            // on direct lighting.\\n            set_uniform(shader, \"roughness\", clamp(col / nrColumns, 0.05f, 1.0f));\\n\\n            var model = translate(mat4(), vec3(\\n                (col - (nrColumns / 2)) * spacing,\\n                (row - (nrRows / 2)) * spacing,\\n                -2.0f\\n            ));\\n            set_uniform(shader, \"model\", model);\\n            render_sphere();\\n        }\\n    }\\n}",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    146.9417724609375,
                    353.7452697753906
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::draw",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node3",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 4,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 4,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -2.1446151733398439,
                    369.70123291015627
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::primitive_shape",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node4",
                    "type": "sphere",
                    "layout": "pos_norm_tex",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 14,
                                "pin": "obj"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 14,
                                "pin": "obj"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -149.38406372070313,
                    -360.5582580566406
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::shader",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node9",
                    "vert": "#version 330 core\r\nlayout (location = 0) in vec3 aPos;\r\n\r\nuniform mat4 projection;\r\nuniform mat4 view;\r\n\r\nout vec3 WorldPos;\r\n\r\nvoid main()\r\n{\r\n    WorldPos = aPos;\r\n\r\n\tmat4 rotView = mat4(mat3(view));\r\n\tvec4 clipPos = projection * rotView * vec4(WorldPos, 1.0);\r\n\r\n\tgl_Position = clipPos.xyww;\r\n}",
                    "frag": "#version 330 core\r\nout vec4 FragColor;\r\nin vec3 WorldPos;\r\n\r\nuniform samplerCube environmentMap;\r\n\r\nvoid main()\r\n{\t\t\r\n    vec3 envColor = texture(environmentMap, WorldPos).rgb;\r\n    \r\n    // HDR tonemap and gamma correct\r\n    envColor = envColor / (envColor + vec3(1.0));\r\n    envColor = pow(envColor, vec3(1.0/2.2)); \r\n    \r\n    FragColor = vec4(envColor, 1.0);\r\n}\r\n",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 18,
                                "pin": "obj"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 18,
                                "pin": "obj"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -310.1889343261719,
                    -360.5837707519531
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::view_mat",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node18",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 16,
                                "pin": "view"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 16,
                                "pin": "view"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    35.40000915527344,
                    -314.2501525878906
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::bind",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node19",
                    "channel": 0,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 19,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 19,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    178.5729522705078,
                    -333.7632141113281
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::draw",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node20",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 21,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 21,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    46.899993896484378,
                    -380.1500549316406
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::primitive_shape",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node21",
                    "type": "cube",
                    "layout": "pos",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 19,
                                "pin": "obj"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 19,
                                "pin": "obj"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    324.95367431640627,
                    -304.9028625488281
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::pass_end",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "",
                    "pass_end": 1,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [],
                "connection": []
            }
        ],
        [
            {
                "position": [
                    -71.84345245361328,
                    -204.79415893554688
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::front_face",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node22",
                    "clockwise": true,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -196.479248046875,
                    -204.39381408691407
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::clear",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node23",
                    "type": [
                        "color",
                        "depth"
                    ],
                    "color": {
                        "r": 100,
                        "g": 0,
                        "b": 0,
                        "a": 0
                    },
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -532.647705078125,
                    414.7729187011719
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::cull",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node24",
                    "type": "off",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 26,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 26,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -323.79241943359377,
                    -417.87615966796877
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "equirectangular_to_cubemap.json",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::sub_graph",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "filepath": "equirectangular_to_cubemap.json",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    },
                    {
                        "from": "cube_map",
                        "to": [
                            {
                                "node_idx": 16,
                                "pin": "environmentMap"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    },
                    {
                        "from": "cube_map",
                        "to": [
                            {
                                "node_idx": 16,
                                "pin": "environmentMap"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -400.9351501464844,
                    415.3550720214844
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::ztest",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node26",
                    "func": "lequal",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 1,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 1,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -119.03933715820313,
                    -282.1562194824219
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::ztest",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node2612",
                    "func": "lequal",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 18,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 18,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -312.9375,
                    -315.58563232421877
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::project_mat",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node1113",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 16,
                                "pin": "projection"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 16,
                                "pin": "projection"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -397.0679626464844,
                    29.900192260742189
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "create_prefilter_cubemap.json",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::sub_graph",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "filepath": "create_prefilter_cubemap.json",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    },
                    {
                        "from": "cube_map",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "prefilterMap"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    },
                    {
                        "from": "cube_map",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "prefilterMap"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -389.0060119628906,
                    -34.470489501953128
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "create_brdf_lut_tex.json",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::sub_graph",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "filepath": "create_brdf_lut_tex.json",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    },
                    {
                        "from": "brdf_lut",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "brdfLUT"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": []
                    },
                    {
                        "from": "brdf_lut",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "brdfLUT"
                            }
                        ]
                    }
                ]
            }
        ]
    ],
    "comp_type": "n0_complex",
    "page_type": "render_graph",
    "camera": {
        "pos": [
            1.128233551979065,
            1.4660089015960694,
            -3.14259672164917
        ],
        "target": [
            -0.44268178939819338,
            0.005446672439575195,
            -0.1537318229675293
        ],
        "up": [
            -0.18470613658428193,
            0.9178142547607422,
            0.35142675042152407
        ],
        "near": 0.009999999776482582,
        "far": 1000.0,
        "aspect": 1.2446352243423463,
        "fov": 45.0
    }
}