{
    "nodes": [
        [
            {
                "position": [
                    -178.75,
                    -41.0
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::texture",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node0",
                    "filepath": "",
                    "type": "2d",
                    "width": 512,
                    "height": 512,
                    "format": "rg16f",
                    "wrap": "repeat",
                    "filter": "linear",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 1,
                                "pin": "col0"
                            },
                            {
                                "node_idx": 11,
                                "pin": "_in"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 1,
                                "pin": "col0"
                            },
                            {
                                "node_idx": 11,
                                "pin": "_in"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    -43.0,
                    -81.0
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::render_target",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node1",
                    "width": 0,
                    "height": 0,
                    "depth_buf": false,
                    "color_buf": false,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 2,
                                "pin": "obj"
                            },
                            {
                                "node_idx": 3,
                                "pin": "obj"
                            }
                        ]
                    },
                    {
                        "from": "col0",
                        "to": []
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 2,
                                "pin": "obj"
                            },
                            {
                                "node_idx": 3,
                                "pin": "obj"
                            }
                        ]
                    },
                    {
                        "from": "col0",
                        "to": []
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    104.75,
                    38.5
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::bind",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node2",
                    "channel": 0,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 4,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 4,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    841.329345703125,
                    59.88847351074219
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::unbind",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node3",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 10,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 10,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    250.6134033203125,
                    50.6331787109375
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::viewport",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node4",
                    "x": 0,
                    "y": 0,
                    "w": 512,
                    "h": 512,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 5,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 5,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    382.6133728027344,
                    48.6331787109375
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::clear",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node5",
                    "type": [
                        "color",
                        "depth"
                    ],
                    "color": {
                        "r": 0,
                        "g": 0,
                        "b": 0,
                        "a": 0
                    },
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 6,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 6,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    547.8438110351563,
                    57.12883758544922
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::bind",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node6",
                    "channel": 0,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 8,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 8,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    419.92974853515627,
                    -38.50413513183594
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::shader",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node7",
                    "vert": "#version 330 core\r\nlayout (location = 0) in vec3 aPos;\r\nlayout (location = 1) in vec2 aTexCoords;\r\n\r\nout vec2 TexCoords;\r\n\r\nvoid main()\r\n{\r\n    TexCoords = aTexCoords;\r\n\tgl_Position = vec4(aPos, 1.0);\r\n}",
                    "frag": "#version 330 core\r\nout vec2 FragColor;\r\nin vec2 TexCoords;\r\n\r\nconst float PI = 3.14159265359;\r\n// ----------------------------------------------------------------------------\r\n// http://holger.dammertz.org/stuff/notes_HammersleyOnHemisphere.html\r\n// efficient VanDerCorpus calculation.\r\nfloat RadicalInverse_VdC(uint bits) \r\n{\r\n     bits = (bits << 16u) | (bits >> 16u);\r\n     bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);\r\n     bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);\r\n     bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);\r\n     bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);\r\n     return float(bits) * 2.3283064365386963e-10; // / 0x100000000\r\n}\r\n// ----------------------------------------------------------------------------\r\nvec2 Hammersley(uint i, uint N)\r\n{\r\n\treturn vec2(float(i)/float(N), RadicalInverse_VdC(i));\r\n}\r\n// ----------------------------------------------------------------------------\r\nvec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness)\r\n{\r\n\tfloat a = roughness*roughness;\r\n\t\r\n\tfloat phi = 2.0 * PI * Xi.x;\r\n\tfloat cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a*a - 1.0) * Xi.y));\r\n\tfloat sinTheta = sqrt(1.0 - cosTheta*cosTheta);\r\n\t\r\n\t// from spherical coordinates to cartesian coordinates - halfway vector\r\n\tvec3 H;\r\n\tH.x = cos(phi) * sinTheta;\r\n\tH.y = sin(phi) * sinTheta;\r\n\tH.z = cosTheta;\r\n\t\r\n\t// from tangent-space H vector to world-space sample vector\r\n\tvec3 up          = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);\r\n\tvec3 tangent   = normalize(cross(up, N));\r\n\tvec3 bitangent = cross(N, tangent);\r\n\t\r\n\tvec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;\r\n\treturn normalize(sampleVec);\r\n}\r\n// ----------------------------------------------------------------------------\r\nfloat GeometrySchlickGGX(float NdotV, float roughness)\r\n{\r\n    // note that we use a different k for IBL\r\n    float a = roughness;\r\n    float k = (a * a) / 2.0;\r\n\r\n    float nom   = NdotV;\r\n    float denom = NdotV * (1.0 - k) + k;\r\n\r\n    return nom / denom;\r\n}\r\n// ----------------------------------------------------------------------------\r\nfloat GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness)\r\n{\r\n    float NdotV = max(dot(N, V), 0.0);\r\n    float NdotL = max(dot(N, L), 0.0);\r\n    float ggx2 = GeometrySchlickGGX(NdotV, roughness);\r\n    float ggx1 = GeometrySchlickGGX(NdotL, roughness);\r\n\r\n    return ggx1 * ggx2;\r\n}\r\n// ----------------------------------------------------------------------------\r\nvec2 IntegrateBRDF(float NdotV, float roughness)\r\n{\r\n    vec3 V;\r\n    V.x = sqrt(1.0 - NdotV*NdotV);\r\n    V.y = 0.0;\r\n    V.z = NdotV;\r\n\r\n    float A = 0.0;\r\n    float B = 0.0; \r\n\r\n    vec3 N = vec3(0.0, 0.0, 1.0);\r\n    \r\n    const uint SAMPLE_COUNT = 1024u;\r\n    for(uint i = 0u; i < SAMPLE_COUNT; ++i)\r\n    {\r\n        // generates a sample vector that's biased towards the\r\n        // preferred alignment direction (importance sampling).\r\n        vec2 Xi = Hammersley(i, SAMPLE_COUNT);\r\n        vec3 H = ImportanceSampleGGX(Xi, N, roughness);\r\n        vec3 L = normalize(2.0 * dot(V, H) * H - V);\r\n\r\n        float NdotL = max(L.z, 0.0);\r\n        float NdotH = max(H.z, 0.0);\r\n        float VdotH = max(dot(V, H), 0.0);\r\n\r\n        if(NdotL > 0.0)\r\n        {\r\n            float G = GeometrySmith(N, V, L, roughness);\r\n            float G_Vis = (G * VdotH) / (NdotH * NdotV);\r\n            float Fc = pow(1.0 - VdotH, 5.0);\r\n\r\n            A += (1.0 - Fc) * G_Vis;\r\n            B += Fc * G_Vis;\r\n        }\r\n    }\r\n    A /= float(SAMPLE_COUNT);\r\n    B /= float(SAMPLE_COUNT);\r\n    return vec2(A, B);\r\n}\r\n// ----------------------------------------------------------------------------\r\nvoid main() \r\n{\r\n    vec2 integratedBRDF = IntegrateBRDF(TexCoords.x, TexCoords.y);\r\n    FragColor = integratedBRDF;\r\n}",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 6,
                                "pin": "obj"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 6,
                                "pin": "obj"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    679.325927734375,
                    50.671119689941409
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::draw",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node8",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "prev"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "next",
                        "to": [
                            {
                                "node_idx": 3,
                                "pin": "prev"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    558.23583984375,
                    -39.768863677978519
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::primitive_shape",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node9",
                    "type": "quad",
                    "layout": "pos_tex",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 8,
                                "pin": "obj"
                            }
                        ]
                    }
                ],
                "connection": [
                    {
                        "from": "out",
                        "to": [
                            {
                                "node_idx": 8,
                                "pin": "obj"
                            }
                        ]
                    }
                ]
            }
        ],
        [
            {
                "position": [
                    996.7391967773438,
                    69.67620849609375
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::pass_end",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "",
                    "pass_end": 0,
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [],
                "connection": []
            }
        ],
        [
            {
                "position": [
                    -65.82129669189453,
                    -174.7817840576172
                ],
                "comp_type": "n2_transform"
            },
            {
                "filepath": "",
                "name": "",
                "id": 0,
                "comp_type": "n0_identity"
            },
            {
                "visible": true,
                "editable": true,
                "comp_type": "n0_flags"
            },
            {
                "node_type": "renderlab::output",
                "node_val": {
                    "style": {
                        "only_title": false,
                        "small_title_font": false
                    },
                    "name": "node10",
                    "var_type": "sampler_2d",
                    "var_name": "brdf_lut",
                    "props": []
                },
                "comp_type": "bp_node",
                "connection": [],
                "connection": []
            }
        ]
    ],
    "comp_type": "n0_complex",
    "page_type": "render_graph"
}